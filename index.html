<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexus Elite | Vault Edition</title>
    
    <meta name="theme-color" content="#0f172a">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Poppins:wght@400;600;900&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <style>
        :root { 
            --primary: #6366f1; --accent: #a855f7; --gold: #f59e0b; 
            --bg: #0f172a; --card-bg: #1e293b; --text: #f8fafc;
            --danger: #ef4444; --success: #22c55e;
            --shadow: 10px 10px 20px #080d1a, -5px -5px 15px rgba(255,255,255,0.02);
        }

        * { margin:0; padding:0; box-sizing:border-box; font-family:'Cairo', sans-serif; -webkit-tap-highlight-color:transparent; }
        body { background:var(--bg); color:var(--text); overflow-x:hidden; min-height:100vh; padding-bottom: 80px; transition: 0.3s; }

        /* Anti-Adblock */
        #adblock-overlay { position: fixed; inset: 0; z-index: 99999; background: #000; color: #fff; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; }
        #adblock-overlay i { font-size: 5rem; color: #ef4444; margin-bottom: 20px; }

        /* Header */
        .header { padding:15px 5%; display:flex; justify-content:space-between; align-items:center; background:rgba(15,23,42,0.95); position:sticky; top:0; z-index:1000; border-bottom:1px solid rgba(255,255,255,0.05); backdrop-filter: blur(10px); }
        .logo { font-weight:900; font-size:1.3rem; color: #fff; text-shadow: 0 0 10px var(--primary); display:flex; align-items:center; gap:8px; }
        .controls { display:flex; gap:10px; align-items:center; }
        .btn-icon { background: rgba(255,255,255,0.1); color: #fff; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: 0.3s; display: grid; place-items: center; }
        .btn-icon:hover { background: var(--primary); }
        .active-vault { color: var(--danger); animation: pulse 1s infinite; }
        .points-badge { background: rgba(0,0,0,0.2); color: var(--gold); padding: 8px 16px; border-radius: 30px; font-weight: bold; border: 1px solid rgba(245,158,11,0.2); font-size: 0.85rem; cursor: pointer; }

        /* Hero */
        .hero { text-align:center; padding:40px 20px; }
        .hero h1 { font-size: 2rem; margin-bottom: 10px; font-weight: 900; }
        .search-box { width:100%; max-width:600px; padding:16px 25px; border-radius:50px; border:1px solid rgba(255,255,255,0.1); background:rgba(30, 41, 59, 0.5); color:var(--text); outline:none; backdrop-filter: blur(5px); }

        /* Ad Containers */
        .ad-container { width:100%; max-width:728px; height:90px; background:rgba(255,255,255,0.02); margin:20px auto; border-radius:16px; display:flex; align-items:center; justify-content:center; border:1px dashed rgba(255,255,255,0.1); overflow:hidden; }

        /* Grid */
        .grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(145px, 1fr)); gap:20px; padding:20px 5%; max-width:1400px; margin:auto; }
        .card { background: var(--card-bg); border-radius: 24px; padding: 25px 15px; text-align: center; cursor: pointer; transition: 0.4s; box-shadow: var(--shadow); position: relative; border: 1px solid rgba(255,255,255,0.03); overflow: hidden; }
        .card:hover { transform: translateY(-8px); border-color: var(--tool-color); }
        .icon-3d { width: 65px; height: 65px; margin: 0 auto 15px; border-radius: 20px; background: rgba(15, 23, 42, 0.6); box-shadow: inset 0 0 10px rgba(0,0,0,0.5); display: grid; place-items: center; font-size: 1.8rem; color: var(--tool-color); transition: 0.4s; }
        .card:hover .icon-3d { background: var(--tool-color); color: #fff; box-shadow: 0 0 25px var(--tool-color); transform: scale(1.1) rotate(5deg); }
        .badge { font-size: 0.7rem; color: var(--tool-color); font-weight: 900; background: rgba(0,0,0,0.2); padding: 4px 10px; border-radius: 20px; }
        .lock-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(2px); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10; border-radius: 24px; }
        .lock-icon { font-size: 2rem; color: var(--danger); margin-bottom: 5px; animation: bounce 2s infinite; }

        /* Panels */
        .history-panel { position: fixed; top: 0; right: -300px; width: 300px; height: 100%; background: #1e293b; z-index: 1200; transition: 0.3s; box-shadow: -5px 0 20px rgba(0,0,0,0.5); padding: 20px; overflow-y: auto; }
        .history-panel.open { right: 0; }
        .hist-item { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 0.9rem; display: flex; justify-content: space-between; color: #ccc; }

        /* Modals */
        .modal { position: fixed; inset: 0; z-index: 9999; background: var(--bg); display: none; flex-direction: column; animation: slideUp 0.4s; }
        @keyframes slideUp { from {transform:translateY(100%)} to {transform:translateY(0)} }
        .modal-head { padding: 15px 25px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; background: #1e293b; }
        .modal-body { padding: 20px; overflow-y: auto; flex-grow: 1; display:flex; flex-direction:column; }

        /* Vault Specific */
        .vault-grid { display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 20px; }
        .vault-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; border-left: 4px solid var(--success); cursor: pointer; }
        .vault-input { width: 100%; padding: 15px; background: rgba(0,0,0,0.3); border: 1px solid var(--primary); color: #fff; border-radius: 10px; font-size: 1.2rem; text-align: center; margin-bottom: 15px; }

        /* Trap */
        .stealth-box { position: relative; width: 300px; height: 250px; margin: 20px auto; border-radius: 20px; overflow: hidden; border: 2px solid var(--primary); box-shadow: 0 0 30px rgba(0,0,0,0.5); }
        .visual-layer { position: absolute; inset: 0; background: linear-gradient(135deg, #10b981, #059669); display: flex; flex-direction: column; align-items: center; justify-content: center; color: #fff; z-index: 1; }
        .ad-layer { position: absolute; inset: 0; width: 300px; height: 250px; opacity: 0.01; z-index: 10; cursor: pointer; }
        .gate-status { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; margin-bottom: 15px; display: flex; justify-content: space-between; font-size: 0.85rem; border: 1px solid rgba(255,255,255,0.1); }
        .status-red { color: #ef4444; font-weight: bold; } .status-green { color: #4ade80; font-weight: bold; }

        /* Common UI */
        .input { width:100%; padding:16px; border-radius:14px; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); color:var(--text); margin-bottom:15px; outline:none; }
        .btn-tool { width:100%; padding:16px; background:var(--primary); color:#fff; border:none; border-radius:14px; font-weight:bold; cursor:pointer; margin-bottom:10px; }
        .res-box { background:rgba(0,0,0,0.3); color:var(--primary); padding:20px; border-radius:14px; font-family:monospace; min-height:100px; margin-top:15px; border: 1px solid rgba(255,255,255,0.1); word-break:break-all; }
        
        #loadingGate { display: none; flex-direction: column; align-items: center; justify-content: center; height: 100%; }
        .loader { width: 50px; height: 50px; border: 4px solid rgba(255,255,255,0.1); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 100% {transform: rotate(360deg);} }
        @keyframes pulse { 0%{transform:scale(1)} 50%{transform:scale(1.05)} 100%{transform:scale(1)} }
        @keyframes bounce { 0%, 100% {transform:translateY(0)} 50% {transform:translateY(-5px)} }
    </style>
</head>
<body>

    <div id="adblock-overlay">
        <i class="fas fa-shield-alt"></i>
        <h2>ÙŠØ¬Ø¨ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø§Ù†Ø¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h2>
        <button onclick="location.reload()" class="btn-tool" style="max-width:200px; margin-top:15px">ØªØ­Ø¯ÙŠØ«</button>
    </div>

    <div class="history-panel" id="historyPanel">
        <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px; margin-bottom:15px">
            <h3 style="margin:0"><i class="fas fa-history"></i> Ø§Ù„Ø³Ø¬Ù„</h3>
            <button onclick="toggleHistory()" style="background:none; border:none; color:#fff; font-size:1.5rem; cursor:pointer">âœ•</button>
        </div>
        <div id="historyList"></div>
    </div>

    <header class="header">
        <div class="logo"><i class="fas fa-cube"></i> NEXUS</div>
        <div class="controls">
            <button class="btn-icon active-vault" onclick="openVaultGate()"><i class="fas fa-lock"></i></button>
            <button class="btn-icon" onclick="toggleHistory()"><i class="fas fa-history"></i></button>
            <select class="lang-sel" id="langSelect" onchange="changeLang(this.value)">
                <option value="ar">AR</option><option value="en">EN</option>
            </select>
            <div class="points-badge" onclick="openStore()"><i class="fas fa-gem"></i> <span id="points">0</span></div>
        </div>
    </header>

    <section class="hero">
        <h1 id="heroTitle">Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h1>
        <p id="heroDesc">40 Ø£Ø¯Ø§Ø©. Ø®Ø²Ù†Ø© Ø³Ø±ÙŠØ©. Ù…ÙØ§ØªÙŠØ­ ÙŠÙˆÙ…ÙŠØ©.</p>
        <input type="text" class="search-box" id="searchBox" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ø¯Ø§Ø©..." oninput="renderTools(this.value)">
    </section>

    <div class="ad-container">
        <ins style="width:100%;height:90px" class="w399fe50b0c" data-domain="//data527.click" data-affquery="/efd0b846f43fdf313e28/399fe50b0c/?placementName=default"></ins>
        <script src="//data527.click/js/responsive.js" async></script>
    </div>

    <div class="grid" id="grid"></div>

    <div class="ad-container">
        <ins style="width:100%;height:90px" class="x04285ff17c" data-domain="//data527.click" data-affquery="/efd0b846f43fdf313e28/04285ff17c/?placementName=default"></ins>
        <script src="//data527.click/js/responsive.js" async></script>
    </div>

    <div class="modal" id="storeModal">
        <div class="modal-head">
            <h3>Ø§Ù„Ù…ØªØ¬Ø± <i class="fas fa-store"></i></h3>
            <button onclick="document.getElementById('storeModal').style.display='none'" style="background:none; border:none; color:#fff; font-size:1.5rem">âœ•</button>
        </div>
        <div class="modal-body">
            <div style="text-align:center; padding:20px;">
                <h1 style="color:var(--gold); font-size:3rem"><i class="fas fa-gem"></i> <span id="storePoints">0</span></h1>
                <p>Ø§Ù„Ø±ØµÙŠØ¯</p>
            </div>
            <button class="btn-tool" onclick="earnPoints()" style="background:#22c55e">Ø´Ø­Ù† Ø±ØµÙŠØ¯ (+100 XP)</button>
        </div>
    </div>

    <div class="modal" id="vaultModal">
        <div class="modal-head">
            <h3 style="color:var(--danger)"><i class="fas fa-user-secret"></i> Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ø³Ø±ÙŠØ©</h3>
            <button onclick="closeVault()" style="background:none; border:none; color:#fff; font-size:1.5rem">âœ•</button>
        </div>
        <div class="modal-body">
            <div id="vaultAuth">
                <p style="text-align:center; margin-bottom:15px">Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² PIN Ù„ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±:</p>
                <input type="password" id="vaultPin" class="vault-input" placeholder="****" maxlength="4">
                <button class="btn-tool" onclick="unlockVaultData()">ÙØªØ­ Ø§Ù„Ø®Ø²Ù†Ø©</button>
                <p style="font-size:0.8rem; text-align:center; color:#666">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø© ÙˆÙ…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹.</p>
            </div>
            <div id="vaultContent" style="display:none;">
                <textarea id="vaultData" class="input" rows="5" placeholder="Ø§ÙƒØªØ¨ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø³Ø±ÙŠØ© Ù‡Ù†Ø§..."></textarea>
                <button class="btn-tool" onclick="saveVaultData()">Ø­ÙØ¸ ÙˆØªØ´ÙÙŠØ±</button>
                <button class="btn-tool" style="background:#ef4444" onclick="clearVault()">Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                <div class="res-box" id="vaultStatus">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„...</div>
            </div>
        </div>
    </div>

    <div class="modal" id="keyModal">
        <div class="modal-head">
            <h3 style="color:var(--gold)">Ø£Ø¯Ø§Ø© Ù…Ù‚ÙÙ„Ø© ğŸ”’</h3>
            <button onclick="document.getElementById('keyModal').style.display='none'" style="background:none; border:none; color:#fff; font-size:1.5rem">âœ•</button>
        </div>
        <div class="modal-body" style="text-align:center">
            <i class="fas fa-crown fa-4x" style="color:var(--gold); margin:20px 0"></i>
            <p>Ù‡Ø°Ù‡ Ø£Ø¯Ø§Ø© Ù…Ù…ÙŠØ²Ø© (Premium). ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…ÙØªØ§Ø­ Ø§Ù„ÙŠÙˆÙ….</p>
            <input type="text" id="dailyKeyInput" class="input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ (Ù…Ø«Ø§Ù„: NEXUS)">
            <button class="btn-tool" onclick="verifyKey()">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙØªØ§Ø­</button>
            <hr style="border:1px solid #333; margin:20px 0; width:100%">
            <button class="btn-tool" style="background:#22c55e" onclick="getKeyLink()">ğŸ”‘ Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØªØ§Ø­ (Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±)</button>
        </div>
    </div>

    <div class="modal" id="modal">
        <div class="modal-head">
            <h3 id="mTitle">TOOL</h3>
            <button onclick="closeModal()" style="background:none; border:none; color:#fff; font-size:1.5rem">âœ•</button>
        </div>
        <div class="modal-body">
            <div id="loadingGate">
                <div class="loader"></div>
                <p id="loadMsg" style="margin-top:15px">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¬Ù‡ÙŠØ²...</p>
            </div>

            <div id="adGate" style="display:none; text-align:center;">
                <div class="gate-status">
                    <span id="timeStat" class="status-red"><i class="fas fa-clock"></i> 30s</span>
                    <span id="clickStat" class="status-red"><i class="fas fa-mouse-pointer"></i> Ø§Ø¶ØºØ· Ù„Ù„ÙØªØ­</span>
                </div>
                
                <div class="stealth-box">
                    <div class="visual-layer">
                        <i class="fas fa-unlock-alt fa-3x" style="margin-bottom:15px"></i>
                        <h3 id="btnText">Ø§Ù†Ù‚Ø± Ù„ÙØªØ­ Ø§Ù„Ø£Ø¯Ø§Ø©</h3>
                        <p>Click to Unlock</p>
                    </div>
                    <div class="ad-layer">
                        <ins style="width:300px;height:250px;display:block" class="c94a66c08e4" data-domain="//data527.click" data-affquery="/fd6850bef82b36f4e32c/94a66c08e4/?placementName=default"></ins>
                        <script src="//data527.click/js/responsive.js" async></script>
                    </div>
                </div>
                <button id="realBtn" onclick="unlockTool()" style="display:none; width:100%; padding:18px; background:var(--primary); border:none; border-radius:14px; color:#fff; font-weight:bold; margin-top:20px; font-size:1.1rem">âœ… Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†</button>
            </div>

            <div id="toolContent" style="display:none;">
                <div id="mBody"></div>
                <button class="btn-tool" style="margin-top:15px; background:#3b82f6" onclick="saveToHistory()">ğŸ’¾ Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„</button>
                <button class="cloud-save" id="cloudBtn" onclick="cloudSave()"><i class="fas fa-cloud-upload-alt"></i> Ø­ÙØ¸ Ø³Ø­Ø§Ø¨ÙŠ</button>
            </div>
        </div>
    </div>

    <script>
        const DIRECT_LINK = "https://data527.click/7c5bd2604d507f353047/94e55d2c09/?placementName=default";
        const MIN_TIME = 30000; 
        const DAILY_KEY = "NEXUS" + new Date().getDate(); // Key changes daily e.g., NEXUS13

        // State
        let userPoints = parseInt(localStorage.getItem('nexus_pts') || '0');
        let pinnedTools = JSON.parse(localStorage.getItem('nexus_pinned') || '[]');
        let history = JSON.parse(localStorage.getItem('nexus_hist') || '[]');
        let unlockedPremium = localStorage.getItem('nexus_key_date') === new Date().toDateString();
        let curLang = 'ar';
        
        document.getElementById('points').innerText = userPoints;
        renderHistory();

        // --- FULL TOOLS ARRAY (40 items, some are Premium) ---
        const tools = [
            {id:'ai', icon:'fas fa-robot', color:'#8b5cf6', premium:true}, 
            {id:'ocr', icon:'fas fa-eye', color:'#7c3aed', premium:true}, 
            {id:'pdf', icon:'fas fa-file-pdf', color:'#ef4444', premium:true},
            {id:'pass', icon:'fas fa-key', color:'#10b981', premium:true},
            {id:'crypt', icon:'fas fa-lock', color:'#059669', premium:true},
            
            // Standard Tools
            {id:'voice', icon:'fas fa-microphone', color:'#a78bfa'}, {id:'tts', icon:'fas fa-volume-up', color:'#c4b5fd'},
            {id:'zip', icon:'fas fa-file-archive', color:'#f97316'}, {id:'convert', icon:'fas fa-sync', color:'#fb923c'}, 
            {id:'csv', icon:'fas fa-file-csv', color:'#fca5a5'}, {id:'hash', icon:'fas fa-hashtag', color:'#34d399'}, 
            {id:'proxy', icon:'fas fa-user-secret', color:'#6ee7b7'}, {id:'code', icon:'fas fa-code', color:'#3b82f6'}, 
            {id:'json', icon:'fas fa-brackets-curly', color:'#0ea5e9'}, {id:'regex', icon:'fas fa-search', color:'#60a5fa'}, 
            {id:'base64', icon:'fas fa-exchange-alt', color:'#93c5fd'}, {id:'git', icon:'fas fa-code-branch', color:'#2563eb'}, 
            {id:'sql', icon:'fas fa-database', color:'#1d4ed8'}, {id:'ip', icon:'fas fa-network-wired', color:'#ec4899'}, 
            {id:'speed', icon:'fas fa-tachometer-alt', color:'#db2777'}, {id:'whois', icon:'fas fa-globe', color:'#f472b6'}, 
            {id:'port', icon:'fas fa-door-open', color:'#fbcfe8'}, {id:'dns', icon:'fas fa-server', color:'#be185d'}, 
            {id:'img', icon:'fas fa-image', color:'#f59e0b'}, {id:'qr', icon:'fas fa-qrcode', color:'#d97706'}, 
            {id:'video', icon:'fas fa-video', color:'#fbbf24'}, {id:'compress', icon:'fas fa-compress', color:'#fcd34d'}, 
            {id:'crop', icon:'fas fa-crop', color:'#b45309'}, {id:'calc', icon:'fas fa-calculator', color:'#64748b'}, 
            {id:'unit', icon:'fas fa-balance-scale', color:'#475569'}, {id:'device', icon:'fas fa-mobile-alt', color:'#94a3b8'}, 
            {id:'todo', icon:'fas fa-check-double', color:'#cbd5e1'}, {id:'pomo', icon:'fas fa-hourglass-start', color:'#334155'}, 
            {id:'zen', icon:'fas fa-spa', color:'#1e293b'}, {id:'note', icon:'fas fa-sticky-note', color:'#0f172a'}, 
            {id:'color', icon:'fas fa-palette', color:'#e2e8f0'}, {id:'meta', icon:'fas fa-tags', color:'#475569'}, 
            {id:'screen', icon:'fas fa-desktop', color:'#ef4444'}, {id:'lorem', icon:'fas fa-paragraph', color:'#8b5cf6'}, 
            {id:'link', icon:'fas fa-link', color:'#3b82f6'}
        ];

        const i18n = {
            ar: { tools: { ai:"Ù…Ø³Ø§Ø¹Ø¯ AI", ocr:"Ù†Øµ Ù…Ù† ØµÙˆØ±Ø©", pdf:"PDF", pass:"ÙƒÙ„Ù…Ø§Øª Ø³Ø±", crypt:"ØªØ´ÙÙŠØ±" /* ... add others ... */ } },
            en: { tools: { ai:"AI Bot", ocr:"OCR", pdf:"PDF", pass:"Pass Gen", crypt:"Encrypt" /* ... add others ... */ } }
        };

        // --- Core Functions ---
        function renderTools(q='') {
            const t = i18n[curLang] || i18n.en;
            const grid = document.getElementById('grid');
            
            const sortedTools = [...tools].sort((a, b) => {
                return (pinnedTools.includes(b.id) ? 1 : 0) - (pinnedTools.includes(a.id) ? 1 : 0);
            });

            grid.innerHTML = sortedTools.filter(item => {
                const name = (t.tools[item.id] || item.id).toLowerCase();
                return name.includes(q.toLowerCase());
            }).map(item => `
                <div class="card" onclick="checkToolAccess('${item.id}', ${item.premium})">
                    <i class="fas fa-star pin-btn ${pinnedTools.includes(item.id) ? 'pinned' : ''}" onclick="togglePin(event, '${item.id}')"></i>
                    ${item.premium && !unlockedPremium ? '<div class="lock-overlay"><i class="fas fa-lock lock-icon"></i></div>' : ''}
                    <div class="icon-3d" style="--tool-color: ${item.color}">
                        <i class="${item.icon}"></i>
                    </div>
                    <h3>${(t.tools[item.id] || item.id).toUpperCase()}</h3>
                    <span class="badge" style="--tool-color: ${item.color}">${item.premium ? 'PREMIUM' : 'PRO'}</span>
                </div>
            `).join('');
        }
        renderTools();

        // --- Logic: Premium & Vault ---
        function checkToolAccess(id, isPremium) {
            if (isPremium && !unlockedPremium) {
                document.getElementById('keyModal').style.display = 'flex';
            } else {
                startGate(id);
            }
        }

        function verifyKey() {
            const input = document.getElementById('dailyKeyInput').value;
            if (input === DAILY_KEY) {
                alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…! ğŸ”“");
                localStorage.setItem('nexus_key_date', new Date().toDateString());
                unlockedPremium = true;
                document.getElementById('keyModal').style.display = 'none';
                renderTools();
            } else {
                alert("ÙƒÙˆØ¯ Ø®Ø§Ø·Ø¦! ØªØ£ÙƒØ¯ Ù…Ù† Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø±Ø§Ø¨Ø·.");
            }
        }

        function getKeyLink() {
            window.open(DIRECT_LINK, '_blank');
            alert(`ÙƒÙˆØ¯ Ø§Ù„ÙŠÙˆÙ… Ù‡Ùˆ: ${DAILY_KEY}\n(Ø§Ù†Ø³Ø®Ù‡ ÙˆØ¹Ø¯ Ù„Ø¥Ø¯Ø®Ø§Ù„Ù‡)`);
        }

        // Vault Logic
        let vaultGateOpened = false;
        function openVaultGate() {
            // First time per session: Show Ad Gate
            if (!vaultGateOpened) {
                window.open(DIRECT_LINK, '_blank'); // Open Ad
                document.getElementById('modal').style.display = 'flex';
                document.getElementById('mTitle').innerText = "SECURE VAULT";
                document.getElementById('loadingGate').style.display = 'flex';
                document.getElementById('adGate').style.display = 'none';
                document.getElementById('toolContent').style.display = 'none';
                
                setTimeout(() => {
                    document.getElementById('loadingGate').style.display = 'none';
                    document.getElementById('adGate').style.display = 'block';
                    startTimer(true); // Special timer for vault
                }, 2000);
            } else {
                document.getElementById('vaultModal').style.display = 'flex';
            }
        }

        function unlockVaultData() {
            const pin = document.getElementById('vaultPin').value;
            if(!pin) return alert("Ø£Ø¯Ø®Ù„ PIN");
            
            try {
                const encrypted = localStorage.getItem('nexus_vault_data');
                if(encrypted) {
                    const bytes = CryptoJS.AES.decrypt(encrypted, pin);
                    const originalText = bytes.toString(CryptoJS.enc.Utf8);
                    if(!originalText && encrypted.length > 0) throw "Wrong PIN";
                    document.getElementById('vaultData').value = originalText;
                }
                document.getElementById('vaultAuth').style.display = 'none';
                document.getElementById('vaultContent').style.display = 'block';
            } catch(e) {
                alert("Ø±Ù…Ø² PIN Ø®Ø§Ø·Ø¦!");
            }
        }

        function saveVaultData() {
            const data = document.getElementById('vaultData').value;
            const pin = document.getElementById('vaultPin').value;
            const encrypted = CryptoJS.AES.encrypt(data, pin).toString();
            localStorage.setItem('nexus_vault_data', encrypted);
            document.getElementById('vaultStatus').innerText = "ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ´ÙÙŠØ± Ø¨Ù†Ø¬Ø§Ø­ âœ…";
        }

        function closeVault() { document.getElementById('vaultModal').style.display = 'none'; }

        // --- Standard Gate Logic ---
        let timeLeft = 30, adClicked = false, timerDone = false, adOpenTime = 0, isAdOpen = false, gateInterval;
        let isVaultGate = false;

        window.addEventListener('blur', () => {
            if (document.getElementById('adGate').style.display === 'block') {
                isAdOpen = true; adOpenTime = performance.now();
                window.open(DIRECT_LINK, '_blank'); 
                document.getElementById('clickStat').className = 'status-yellow';
                document.getElementById('clickStat').innerHTML = '...';
            }
        });

        window.addEventListener('focus', () => {
            if (isAdOpen) {
                const elapsed = performance.now() - adOpenTime;
                isAdOpen = false;
                if (elapsed >= MIN_TIME) { adClicked = true; checkGate(); }
                else { alert("ÙŠØ¬Ø¨ Ø§Ù„Ø¨Ù‚Ø§Ø¡ 30 Ø«Ø§Ù†ÙŠØ©!"); adClicked = false; document.getElementById('clickStat').className = 'status-red'; }
            }
        });

        function startGate(id) {
            isVaultGate = false;
            window.open(DIRECT_LINK, '_blank');
            const t = i18n[curLang] || i18n.en;
            document.getElementById('modal').style.display = 'flex';
            document.getElementById('mTitle').innerText = (t.tools[id] || id).toUpperCase();
            document.getElementById('loadingGate').style.display = 'flex';
            document.getElementById('adGate').style.display = 'none';
            document.getElementById('toolContent').style.display = 'none';

            setTimeout(() => {
                document.getElementById('loadingGate').style.display = 'none';
                document.getElementById('adGate').style.display = 'block';
                startTimer();
            }, 2500);

            // Populate Tool
            document.getElementById('mBody').innerHTML = `<input class="input" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."><button class="btn-tool">Ø¨Ø¯Ø¡</button><div class="res-box">...</div>`;
        }

        function startTimer(forVault = false) {
            isVaultGate = forVault;
            timeLeft = 30; timerDone = false; adClicked = false;
            clearInterval(gateInterval);
            gateInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timeStat').innerText = timeLeft + 's';
                if(timeLeft <= 0) { clearInterval(gateInterval); timerDone = true; checkGate(); }
            }, 1000);
        }

        function checkGate() {
            if(timerDone && adClicked) {
                document.getElementById('stealthBox').style.display = 'none';
                document.getElementById('realBtn').style.display = 'block';
                document.getElementById('clickStat').className = 'status-green';
                document.getElementById('clickStat').innerText = 'ØªÙ…!';
            }
        }

        function unlockTool() {
            userPoints += 50; localStorage.setItem('nexus_pts', userPoints);
            document.getElementById('points').innerText = userPoints;
            document.getElementById('adGate').style.display = 'none';
            
            if(isVaultGate) {
                vaultGateOpened = true;
                document.getElementById('modal').style.display = 'none'; // Close gate
                document.getElementById('vaultModal').style.display = 'flex'; // Open vault
            } else {
                document.getElementById('toolContent').style.display = 'block';
                document.getElementById('cloudBtn').style.display = 'flex';
            }
        }

        // Utils
        function togglePin(e, id) { e.stopPropagation(); if(pinnedTools.includes(id)) pinnedTools = pinnedTools.filter(i=>i!==id); else pinnedTools.push(id); localStorage.setItem('nexus_pinned', JSON.stringify(pinnedTools)); renderTools(); }
        function toggleHistory() { document.getElementById('historyPanel').classList.toggle('open'); }
        function saveToHistory() { const id = document.getElementById('mTitle').innerText; history.unshift({id, time: new Date().toLocaleTimeString()}); localStorage.setItem('nexus_hist', JSON.stringify(history)); renderHistory(); alert("Saved!"); }
        function renderHistory() { document.getElementById('historyList').innerHTML = history.map(h => `<div class="hist-item"><span>${h.id}</span><span>${h.time}</span></div>`).join(''); }
        function openStore() { document.getElementById('storeModal').style.display = 'flex'; document.getElementById('storePoints').innerText = userPoints; }
        function earnPoints() { window.open(DIRECT_LINK, '_blank'); setTimeout(() => { userPoints += 100; localStorage.setItem('nexus_pts', userPoints); document.getElementById('points').innerText = userPoints; document.getElementById('storePoints').innerText = userPoints; alert('+100 XP'); }, 5000); }
        function cloudSave() { window.open(DIRECT_LINK, '_blank'); }
        function closeModal() { document.getElementById('modal').style.display = 'none'; }
        function changeLang(l) { curLang = l; renderTools(); }
    </script>
</body>
</html>
